<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="preload" as="font" href="https://www.wikiod.com/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
<link rel="preload" as="font" href="https://www.wikiod.com/fonts/vendor/jost/jost-v4-latin-500.woff2" type="font/woff2" crossorigin>
<link rel="preload" as="font" href="https://www.wikiod.com/fonts/vendor/jost/jost-v4-latin-700.woff2" type="font/woff2" crossorigin>

  <script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script>

  <link rel="stylesheet" href="https://www.wikiod.com/main.7636753edc6f50e96b0045eba39982b1b0b2b6947250d1080bec1f4cbe52399ea6bcecac0e0b6026886b51bdbde879ec9a9820765b03caead79d8ddf3b79336f.css" integrity="sha512-djZ1PtxvUOlrAEXro5mCsbCytpRyUNEIC&#43;wfTL5SOZ6mvOysDgtgJohrUb296HnsmpggdlsDyurXnY3fO3kzbw==" crossorigin="anonymous">
<noscript><style>img.lazyload { display: none; }</style></noscript>
  <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <title>macros - WikiOD</title>
<meta name="description" content="The Purpose of Macros # Macros are intended for generating code, transforming code and providing new notations. These new notations can be more suited to better express the program, for example by providing domain-level constructs or entire new embedded languages.
Macros can make source code more self-explanatory, but debugging can be made more difficult. As a rule of thumb, one should not use macros when a regular function will do. When you do use them, avoid the usual pitfalls, try to stick to the commonly used patterns and naming conventions.">
  <link rel="canonical" href="https://www.wikiod.com/common-lisp/macros/">
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="macros">
<meta property="og:description" content="The Purpose of Macros # Macros are intended for generating code, transforming code and providing new notations. These new notations can be more suited to better express the program, for example by providing domain-level constructs or entire new embedded languages.
Macros can make source code more self-explanatory, but debugging can be made more difficult. As a rule of thumb, one should not use macros when a regular function will do. When you do use them, avoid the usual pitfalls, try to stick to the commonly used patterns and naming conventions.">
<meta property="og:url" content="https://www.wikiod.com/common-lisp/macros/">
<meta property="og:site_name" content="WikiOD">

  <meta property="og:image" content="https://www.wikiod.com/wikiod_logo.png"/>
      <meta property="og:image:alt" content="WikiOD">
    
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@wikiod">
<meta name="twitter:creator" content="@wikiod">
<meta name="twitter:title" content="macros">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://www.wikiod.com/wikiod_logo.png">
    <meta name="twitter:image:alt" content="macros">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
        "@id": "https://www.wikiod.com/#/schema/organization/1",
      "name": "WikiOD",
      "url": "https://www.wikiod.com/",
      "sameAs": [
        "https://twitter.com/wikiod"
        , "https://github.com/wikiod-com"
        ],
      "logo": {
          "@type": "ImageObject",
          "@id": "https://www.wikiod.com/#/schema/image/1",
          "url": "https://www.wikiod.com/wikiod_logo.png",
          "width":  512 ,
          "height":  512 ,
          "caption": "WikiOD"
        },
        "image": {
          "@id": "https://www.wikiod.com/#/schema/image/1"
        }
      },
    {
      "@type": "WebSite",
      "@id": "https://www.wikiod.com/#/schema/website/1",
      "url": "https://www.wikiod.com/",
      "name": "WikiOD",
      "description": "Welcome to WikiOD - Wiki Online Documentation WikiOD is a collaborative writing project to build the highest quality online documentation of all programming languages, education-related subjects and concepts.",
      "publisher": {
          "@id": "https://www.wikiod.com/#/schema/organization/1"
        }
      },
    {
      "@type": "WebPage",
      "@id": "https://www.wikiod.com/common-lisp/macros/",
      "url": "https://www.wikiod.com/common-lisp/macros/",
      "name": "macros",
      "description": "",
      "isPartOf": {
        "@id": "https://www.wikiod.com/#/schema/website/1"
      },
      "about": {
          "@id": "https://www.wikiod.com/#/schema/organization/1"
        },
      "datePublished": "0001-01-01T00:00:00CET",
      "dateModified": "0001-01-01T00:00:00CET",
      "breadcrumb": {
        "@id": "https://www.wikiod.com/common-lisp/macros/#/schema/breadcrumb/1"
      },
      "primaryImageOfPage": {
        "@id": "https://www.wikiod.com/common-lisp/macros/#/schema/image/2"
      },
      "inLanguage": "en",
      "potentialAction": [{
        "@type": "ReadAction", "target": ["https://www.wikiod.com/common-lisp/macros/"]
      }]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://www.wikiod.com/common-lisp/macros/#/schema/breadcrumb/1",
      "name": "Breadcrumbs",
      "itemListElement": [{
        "@type": "ListItem",
        "position":  1 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://www.wikiod.com/",
          "url": "https://www.wikiod.com/",
          "name": "Home"
          }
        },{
        "@type": "ListItem",
        "position":  2 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://www.wikiod.com/common-lisp/",
          "url": "https://www.wikiod.com/common-lisp/",
          "name": "Common Lisp"
          }
        },{
        "@type": "ListItem",
        "position":  3 ,
        "item": {
          "@id": "https://www.wikiod.com/common-lisp/macros/"
          }
        }]
    },

    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Article",
          "@id": "https://www.wikiod.com/#/schema/article/1",
          "headline": "macros",
          "description": "",
          "isPartOf": {
            "@id": "https://www.wikiod.com/common-lisp/macros/"
          },
          "mainEntityOfPage": {
            "@id": "https://www.wikiod.com/common-lisp/macros/"
          },
          "datePublished": "0001-01-01T00:00:00CET",
          "dateModified": "0001-01-01T00:00:00CET",
          "author": {
            "@id": "https://www.wikiod.com/#/schema/person/2"
          },
          "publisher": {
              "@id": "https://www.wikiod.com/#/schema/organization/1"
            },
          "image": {
            "@id": "https://www.wikiod.com/common-lisp/macros/#/schema/image/2"
          }
        }
      ]
    },
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Person",
          "@id": "https://www.wikiod.com/#/schema/person/2",
          "name": "WikiOD",
          "sameAs": [
            "https://twitter.com/wikiod"
            , "https://github.com/wikiod-com"
            ]
        }
      ]
    },
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "ImageObject",
          "@id": "https://www.wikiod.com/common-lisp/macros/#/schema/image/2",
          "url": "https://www.wikiod.com/wikiod_logo.png",
          "contentUrl": "https://www.wikiod.com/wikiod_logo.png",
          "caption": "macros"
        }
      ]
    }

  ]
}
</script>

  <meta name="theme-color" content="#fff">
<link rel="icon" href="https://www.wikiod.com/favicon.ico" sizes="any">
<link rel="apple-touch-icon" sizes="180x180" href="https://www.wikiod.com/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.wikiod.com/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.wikiod.com/favicon-16x16.png">
<link rel="manifest" crossorigin="use-credentials" href="https://www.wikiod.com/site.webmanifest">

  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9345677191971886" crossorigin="anonymous"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y7ZZF8Q2L4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y7ZZF8Q2L4');
</script>

</head>

  <body class="docs single">
    <div class="sticky-top">
<div class="header-bar"></div>

<header class="navbar navbar-expand-lg navbar-light doks-navbar">
  <nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation">

    <a class="navbar-brand order-0" href="/" aria-label="WikiOD">
      WikiOD
    </a>

    <button class="btn btn-link order-0 ms-auto d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
    </button>
    <div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
      <div class="header-bar"></div>
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">Browse docs</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <aside class="doks-sidebar mt-n3">
          <nav id="doks-docs-nav" aria-label="Tertiary navigation">
            

  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
    
    <a href="https://www.wikiod.com/docs/common-lisp/"><h3 class="h6 text-uppercase mb-2">common-lisp Tutorial</h3></a>
    <ul class="list-unstyled">
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/getting-started-with-common-lisp/">Getting started with common-lisp</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/asdf---another-system-definition-facility/">ASDF - Another System Definition Facility</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/ansi-common-lisp-the-language-standard-and-its-documentation/">ANSI Common Lisp, the language standard and its documentation</a></li>
        
      
      
        
          
          <li><a class="docs-link active" href="https://www.wikiod.com/common-lisp/macros/">macros</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/clos---the-common-lisp-object-system/">CLOS - the Common Lisp Object System</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/working-with-slime/">Working with SLIME</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/format/">format</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/loop-a-common-lisp-macro-for-iteration/">LOOP, a Common Lisp macro for iteration</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/cons-cells-and-lists/">Cons cells and lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/sequence---how-to-split-a-sequence/">sequence - how to split a sequence</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/unit-testing/">Unit testing</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/regular-expressions/">Regular Expressions</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/customization/">Customization</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/hash-tables/">Hash tables</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/functions-as-first-class-values/">Functions as first class values</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/streams/">Streams</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/clos-meta-object-protocol/">CLOS Meta-Object Protocol</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/working-with-databases/">Working with databases</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/pattern-matching/">Pattern matching</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/creating-binaries/">Creating Binaries</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/control-structures/">Control Structures</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/functions/">Functions</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/mapping-functions-over-lists/">Mapping functions over lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/basic-loops/">Basic loops</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/quote/">Quote</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/recursion/">Recursion</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/lexical-vs-special-variables/">Lexical vs special variables</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/types-of-lists/">Types of Lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/booleans-and-generalized-booleans/">Booleans and Generalized Booleans</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/grouping-forms/">Grouping Forms</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/equality-and-other-comparison-predicates/">Equality and other comparison predicates</a></li>
        
      
    </ul>
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  


          </nav>
        </aside>
      </div>
    </div>
    <button class="btn btn-menu order-2 d-block d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDoks" aria-controls="offcanvasDoks" aria-label="Open main menu">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>
    <div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex="-1" id="offcanvasDoks" data-bs-backdrop="true" aria-labelledby="offcanvasDoksLabel">
      <div class="header-bar d-lg-none"></div>
      <div class="offcanvas-header d-lg-none">
        <h2 class="h5 offcanvas-title ps-2" id="offcanvasDoksLabel"><a class="text-dark" href="/">WikiOD</a></h2>
        <button type="button" class="btn-close text-reset me-2" data-bs-dismiss="offcanvas" aria-label="Close main menu"></button>
      </div>
      <div class="offcanvas-body p-4 p-lg-0">
        <ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto">
              <li class="nav-item">
                <a class="nav-link ps-0 py-1" href="/docs/">Tutorials</a>
              </li>
            
          
              <li class="nav-item">
                <a class="nav-link ps-0 py-1" href="/blog/">Articles</a>
              </li>
            
          </ul>

        <hr class="text-black-50 my-4 d-lg-none">
        <ul class="nav flex-column flex-lg-row">
          </ul>

        <hr class="text-black-50 my-4 d-lg-none">
        <button id="mode" class="btn btn-link" type="button" aria-label="Toggle user interface mode">
          <span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
          <span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
        </button>
        <hr class="text-black-50 my-4 d-lg-none">
        <div class="dropdown">
          <button class="btn btn-doks-light dropdown-toggle" id="doks-languages" data-bs-toggle="dropdown" aria-expanded="false" data-bs-display="static">
            English
            <span class="dropdown-caret"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-lg-end me-lg-2 shadow rounded border-0" aria-labelledby="doks-languages">

            <li><a class="dropdown-item current" aria-current="true" href="/common-lisp/macros/">English</a></li>

            <li><hr class="dropdown-divider"></li>

            
                <li><a class="dropdown-item" rel="alternate" href="/es/common-lisp/macros/" hreflang="es" lang="es">Español</a></li>
              
                <li><a class="dropdown-item" rel="alternate" href="/fr/common-lisp/macros/" hreflang="fr" lang="fr">Français</a></li>
              
                <li><a class="dropdown-item" rel="alternate" href="/pt/common-lisp/macros/" hreflang="pt" lang="pt">Português</a></li>
              
                <li><a class="dropdown-item" rel="alternate" href="/tr/common-lisp/makrolar/" hreflang="tr" lang="tr">Türk</a></li>
              
          </ul>
        </div>
        </div>
    </div>
  </nav>
</header>


</div>
<div class="container-xxl">
  <aside class="doks-sidebar">
    <nav id="doks-docs-nav" class="collapse d-lg-none" aria-label="Tertiary navigation">
      

  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
    
    <a href="https://www.wikiod.com/docs/common-lisp/"><h3 class="h6 text-uppercase mb-2">common-lisp Tutorial</h3></a>
    <ul class="list-unstyled">
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/getting-started-with-common-lisp/">Getting started with common-lisp</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/asdf---another-system-definition-facility/">ASDF - Another System Definition Facility</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/ansi-common-lisp-the-language-standard-and-its-documentation/">ANSI Common Lisp, the language standard and its documentation</a></li>
        
      
      
        
          
          <li><a class="docs-link active" href="https://www.wikiod.com/common-lisp/macros/">macros</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/clos---the-common-lisp-object-system/">CLOS - the Common Lisp Object System</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/working-with-slime/">Working with SLIME</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/format/">format</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/loop-a-common-lisp-macro-for-iteration/">LOOP, a Common Lisp macro for iteration</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/cons-cells-and-lists/">Cons cells and lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/sequence---how-to-split-a-sequence/">sequence - how to split a sequence</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/unit-testing/">Unit testing</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/regular-expressions/">Regular Expressions</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/customization/">Customization</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/hash-tables/">Hash tables</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/functions-as-first-class-values/">Functions as first class values</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/streams/">Streams</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/clos-meta-object-protocol/">CLOS Meta-Object Protocol</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/working-with-databases/">Working with databases</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/pattern-matching/">Pattern matching</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/creating-binaries/">Creating Binaries</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/control-structures/">Control Structures</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/functions/">Functions</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/mapping-functions-over-lists/">Mapping functions over lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/basic-loops/">Basic loops</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/quote/">Quote</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/recursion/">Recursion</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/lexical-vs-special-variables/">Lexical vs special variables</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/types-of-lists/">Types of Lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/booleans-and-generalized-booleans/">Booleans and Generalized Booleans</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/grouping-forms/">Grouping Forms</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/equality-and-other-comparison-predicates/">Equality and other comparison predicates</a></li>
        
      
    </ul>
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  


    </nav>
  </aside>
</div>


    <div class="wrap container-xxl" role="document">
      <div class="content">
        
	<div class="row flex-xl-nowrap">
		<div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block">
			<nav id="sidebar-default" class="docs-links" aria-label="Main navigation">
				

  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
    
    <a href="https://www.wikiod.com/docs/common-lisp/"><h3 class="h6 text-uppercase mb-2">common-lisp Tutorial</h3></a>
    <ul class="list-unstyled">
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/getting-started-with-common-lisp/">Getting started with common-lisp</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/asdf---another-system-definition-facility/">ASDF - Another System Definition Facility</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/ansi-common-lisp-the-language-standard-and-its-documentation/">ANSI Common Lisp, the language standard and its documentation</a></li>
        
      
      
        
          
          <li><a class="docs-link active" href="https://www.wikiod.com/common-lisp/macros/">macros</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/clos---the-common-lisp-object-system/">CLOS - the Common Lisp Object System</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/working-with-slime/">Working with SLIME</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/format/">format</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/loop-a-common-lisp-macro-for-iteration/">LOOP, a Common Lisp macro for iteration</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/cons-cells-and-lists/">Cons cells and lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/sequence---how-to-split-a-sequence/">sequence - how to split a sequence</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/unit-testing/">Unit testing</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/regular-expressions/">Regular Expressions</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/customization/">Customization</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/hash-tables/">Hash tables</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/functions-as-first-class-values/">Functions as first class values</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/streams/">Streams</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/clos-meta-object-protocol/">CLOS Meta-Object Protocol</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/working-with-databases/">Working with databases</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/pattern-matching/">Pattern matching</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/creating-binaries/">Creating Binaries</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/control-structures/">Control Structures</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/functions/">Functions</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/mapping-functions-over-lists/">Mapping functions over lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/basic-loops/">Basic loops</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/quote/">Quote</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/recursion/">Recursion</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/lexical-vs-special-variables/">Lexical vs special variables</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/types-of-lists/">Types of Lists</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/booleans-and-generalized-booleans/">Booleans and Generalized Booleans</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/grouping-forms/">Grouping Forms</a></li>
        
      
      
        
          
          <li><a class="docs-link" href="https://www.wikiod.com/common-lisp/equality-and-other-comparison-predicates/">Equality and other comparison predicates</a></li>
        
      
    </ul>
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  


			</nav>
		</div>
		<nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
			<div class="d-xl-none">
  <button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#onThisPage" aria-controls="doks-docs-nav" aria-expanded="false" aria-label="Toggle On this page navigation">
    <span>On this page</span>
    <span>
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline></svg>
    </span>
  </button>
  <div class="collapse" id="onThisPage">
    <div class="card card-body mt-3 py-1">
      <div class="page-links">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#anaphoric-macros">Anaphoric Macros</a></li>
    <li><a href="#backquote---writing-code-templates-for-macros">Backquote - writing code templates for macros</a></li>
    <li><a href="#common-macro-patterns">Common Macro Patterns</a></li>
  </ul>

  <ul>
    <li><a href="#macroexpand">MACROEXPAND</a></li>
    <li><a href="#if-let-when-let-foo-let-macros">if-let, when-let, <foo>-let macros</a></li>
    <li><a href="#unique-symbols-to-prevent-name-clashes-in-macros">Unique symbols to prevent name clashes in macros</a></li>
    <li><a href="#using-macros-to-define-data-structures">Using Macros to define data structures</a></li>
  </ul>
</nav>
      </div>
    </div>
  </div>
</div>
<div class="page-links d-none d-xl-block">
  <h3>On this page</h3>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#anaphoric-macros">Anaphoric Macros</a></li>
    <li><a href="#backquote---writing-code-templates-for-macros">Backquote - writing code templates for macros</a></li>
    <li><a href="#common-macro-patterns">Common Macro Patterns</a></li>
  </ul>

  <ul>
    <li><a href="#macroexpand">MACROEXPAND</a></li>
    <li><a href="#if-let-when-let-foo-let-macros">if-let, when-let, <foo>-let macros</a></li>
    <li><a href="#unique-symbols-to-prevent-name-clashes-in-macros">Unique symbols to prevent name clashes in macros</a></li>
    <li><a href="#using-macros-to-define-data-structures">Using Macros to define data structures</a></li>
  </ul>
</nav>
  </div>

		</nav>
		<main class="docs-content col-lg-11 col-xl-9">
		
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="/">Home</a></li>
<li class="breadcrumb-item"><a href="/docs/">Docs</a></li>
<li class="breadcrumb-item"><a href="/docs/common-lisp/">common-lisp Tutorial</a></li>
<li class="breadcrumb-item active" aria-current="page">macros</li>
					</ol>
				</nav>
			
			<h1>macros</h1>
			<p class="lead"></p>
			<nav class="d-xl-none" aria-label="Quaternary navigation">
				<div class="d-xl-none">
  <button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#onThisPage" aria-controls="doks-docs-nav" aria-expanded="false" aria-label="Toggle On this page navigation">
    <span>On this page</span>
    <span>
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline></svg>
    </span>
  </button>
  <div class="collapse" id="onThisPage">
    <div class="card card-body mt-3 py-1">
      <div class="page-links">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#anaphoric-macros">Anaphoric Macros</a></li>
    <li><a href="#backquote---writing-code-templates-for-macros">Backquote - writing code templates for macros</a></li>
    <li><a href="#common-macro-patterns">Common Macro Patterns</a></li>
  </ul>

  <ul>
    <li><a href="#macroexpand">MACROEXPAND</a></li>
    <li><a href="#if-let-when-let-foo-let-macros">if-let, when-let, <foo>-let macros</a></li>
    <li><a href="#unique-symbols-to-prevent-name-clashes-in-macros">Unique symbols to prevent name clashes in macros</a></li>
    <li><a href="#using-macros-to-define-data-structures">Using Macros to define data structures</a></li>
  </ul>
</nav>
      </div>
    </div>
  </div>
</div>
<div class="page-links d-none d-xl-block">
  <h3>On this page</h3>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#anaphoric-macros">Anaphoric Macros</a></li>
    <li><a href="#backquote---writing-code-templates-for-macros">Backquote - writing code templates for macros</a></li>
    <li><a href="#common-macro-patterns">Common Macro Patterns</a></li>
  </ul>

  <ul>
    <li><a href="#macroexpand">MACROEXPAND</a></li>
    <li><a href="#if-let-when-let-foo-let-macros">if-let, when-let, <foo>-let macros</a></li>
    <li><a href="#unique-symbols-to-prevent-name-clashes-in-macros">Unique symbols to prevent name clashes in macros</a></li>
    <li><a href="#using-macros-to-define-data-structures">Using Macros to define data structures</a></li>
  </ul>
</nav>
  </div>

			</nav>
			<h1 id="the-purpose-of-macros">The Purpose of Macros <a href="#the-purpose-of-macros" class="anchor" aria-hidden="true">#</a></h1>
<p>Macros are intended for generating code, transforming code and providing new notations. These new notations can be more suited to better express the program, for example by providing domain-level constructs or entire new embedded languages.</p>
<p>Macros can make source code more self-explanatory, but debugging can be made more difficult. As a rule of thumb, one should not use macros when a regular function will do. When you do use them, avoid the usual pitfalls, try to stick to the commonly used patterns and naming conventions.</p>
<h1 id="macroexpansion-order">Macroexpansion Order <a href="#macroexpansion-order" class="anchor" aria-hidden="true">#</a></h1>
<p>Compared to functions, macros are expanded in a reverse order; outmost first, inmost last. This means that by default one cannot use an inner macro to generate syntax required for an outer macro.</p>
<h1 id="evaluation-order">Evaluation Order <a href="#evaluation-order" class="anchor" aria-hidden="true">#</a></h1>
<p>Sometimes macros need to move user-supplied forms around. One must make sure not to change the order in which they are evaluated. The user may be relying on side effects happening in order.</p>
<h1 id="evaluate-once-only">Evaluate Once Only <a href="#evaluate-once-only" class="anchor" aria-hidden="true">#</a></h1>
<p>The expansion of a macro often needs to use the value of the same user-supplied form more than once. It is possible that the form happens to have side-effects, or it might be calling an expensive function. Thus the macro must make sure to only evaluate such forms once. Usually this will be done by assigning the value to a local variable (whose name is <code>GENSYM</code>ed).</p>
<h1 id="functions-used-by-macros-using-eval-when">Functions used by Macros, using EVAL-WHEN <a href="#functions-used-by-macros-using-eval-when" class="anchor" aria-hidden="true">#</a></h1>
<p>Complex macros often have parts of their logic implemented in separate functions. One must remember, however, that macros are expanded before the actual code is compiled. When compiling a file, then by default, functions and variables defined in the same file will not be available during macro execution. All function and variable definitions, in the same file, used by a macro must be wrapped inside an <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_eval_w.htm"><code>EVAL-WHEN</code></a>-form. The <code>EVAL-WHEN</code> should have all three times specified, when the enclosed code also should be evaluated during load and runtime.</p>
<pre><code>(eval-when (:compile-toplevel :load-toplevel :execute)
  (defun foobar () ...))
</code></pre>
<p>This does not apply to functions called from the expansion of the macro, only the ones called by the macro itself.</p>
<h2 id="anaphoric-macros">Anaphoric Macros <a href="#anaphoric-macros" class="anchor" aria-hidden="true">#</a></h2>
<p>An <a href="https://en.wikipedia.org/wiki/Anaphoric_macro">Anaphoric Macro</a> is a macro that introduces a variable (often <code>IT</code>) that captures the result of a user-supplied form. A common example is the Anaphoric If, which is like a regular <code>IF</code>, but also defines the variable <code>IT</code> to refer to the result of the test-form.</p>
<pre><code>(defmacro aif (test-form then-form &amp;optional else-form)
  `(let ((it ,test-form))
     (if it ,then-form ,else-form)))

(defun test (property plist)
  (aif (getf plist property)
       (format t &quot;The value of ~s is ~a.~%&quot; property it)
       (format t &quot;~s wasn't in ~s!~%&quot; property plist)))

(test :a '(:a 10 :b 20 :c 30))
; The value of :A is 10.
(test :d '(:a 10 :b 20 :c 30))
; :D wasn't in (:A 10 :B 20 :C 30)!
</code></pre>
<h2 id="backquote---writing-code-templates-for-macros">Backquote - writing code templates for macros <a href="#backquote---writing-code-templates-for-macros" class="anchor" aria-hidden="true">#</a></h2>
<p>Macros return code. Since code in Lisp consists of lists, one can use the regular list manipulation functions to generate it.</p>
<pre><code>;; A pointless macro
(defmacro echo (form)
  (list 'progn
        (list 'format t &quot;Form: ~a~%&quot; (list 'quote form))
        form))
</code></pre>
<p>This is often very hard to read, especially in longer macros. The <a href="http://www.lispworks.com/documentation/HyperSpec/Body/02_df.htm">Backquote</a> reader macro allows one to write quoted templates that are filled in by selectively evaluating elements.</p>
<pre><code>(defmacro echo (form)
  `(progn
     (format t &quot;Form: ~a~%&quot; ',form)
     ,form))

(macroexpand '(echo (+ 3 4)))
;=&gt; (PROGN (FORMAT T &quot;Form: ~a~%&quot; '(+ 3 4)) (+ 3 4))
</code></pre>
<p>This version looks almost like regular code. The commas are used to evaluate <code>FORM</code>; everything else is returned as is. Notice that in <code>',form</code> the single quote is outside the comma, so it will be returned.</p>
<p>One can also use <code>,@</code> to splice a list in the position.</p>
<pre><code>(defmacro echo (&amp;rest forms)
  `(progn
     ,@(loop for form in forms collect `(format t &quot;Form: ~a~%&quot; ,form))
     ,@forms))

(macroexpand '(echo (+ 3 4) 
                    (print &quot;foo&quot;)
                    (random 10)))
;=&gt; (PROGN
;    (FORMAT T &quot;Form: ~a~%&quot; (+ 3 4))
;    (FORMAT T &quot;Form: ~a~%&quot; (PRINT &quot;foo&quot;))
;    (FORMAT T &quot;Form: ~a~%&quot; (RANDOM 10))
;    (+ 3 4)
;    (PRINT &quot;foo&quot;)
;    (RANDOM 10))
</code></pre>
<p>Backquote can be used outside macros too.</p>
<h2 id="common-macro-patterns">Common Macro Patterns <a href="#common-macro-patterns" class="anchor" aria-hidden="true">#</a></h2>
<p><strong>TODO: Maybe move the explanations to remarks and add examples separately</strong></p>
<h1 id="foof">FOOF <a href="#foof" class="anchor" aria-hidden="true">#</a></h1>
<p>In Common Lisp, there is a concept of <a href="http://www.lispworks.com/documentation/HyperSpec/Body/05_a.htm">Generalized References</a>. They allow a programmer to setf values to various &ldquo;places&rdquo; as if they were variables. Macros that make use of this ability often have a <code>F</code>-postfix in the name. The place is usually the first argument to the macro.</p>
<p>Examples from the standard: <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_incf_.htm#decf"><code>INCF</code>, <code>DECF</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_rotate.htm#rotatef"><code>ROTATEF</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_shiftf.htm#shiftf"><code>SHIFTF</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_remf.htm#remf"><code>REMF</code></a>.</p>
<p>A silly example, a macro that flips the sign of a number store in a place:</p>
<pre><code>(defmacro flipf (place)
  `(setf ,place (- ,place)))
</code></pre>
<h1 id="with-foo">WITH-FOO <a href="#with-foo" class="anchor" aria-hidden="true">#</a></h1>
<p>Macros that acquire and safely release a resource are usually named with a <code>WITH-</code>-prefix. The macro should usually use syntax like:</p>
<pre><code>(with-foo (variable details-of-the-foo...)
  body...)
</code></pre>
<p>Examples from the standard: <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_w_open.htm"><code>WITH-OPEN-FILE</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_w_op_1.htm"><code>WITH-OPEN-STREAM</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_w_in_f.htm"><code>WITH-INPUT-FROM-STRING</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_w_out_.htm"><code>WITH-OUTPUT-TO-STRING</code></a>.</p>
<p>One approach to implementing this type of macro that can avoid some of the pitfalls of name pollution and unintended multiple evaluation is by implementing a functional version first.  For instance, the first step in implementing a <code>with-widget</code> macro that safely creates a widget and cleans up afterward might be a function:</p>
<pre><code>(defun call-with-widget (args function)
  (let ((widget (apply #'make-widget args))) ; obtain WIDGET
    (unwind-protect (funcall function widget)  ; call FUNCTION with WIDGET
      (cleanup widget)                         ; cleanup
</code></pre>
<p>Because this is a function, there are no concerns about the scope of names within <strong>function</strong> or <strong>supplier</strong>, and it makes it easy to write a corresponding macro:</p>
<pre><code>(defmacro with-widget ((var &amp;rest args) &amp;body body)
  `(call-with-widget (list ,@args) (lambda (,var) ,@body)))
</code></pre>
<h1 id="do-foo">DO-FOO <a href="#do-foo" class="anchor" aria-hidden="true">#</a></h1>
<p>Macros that iterate over something are often named with a <code>DO</code>-prefix. The macro syntax should usually be in form</p>
<pre><code>(do-foo (variable the-foo-being-done return-value)
  body...)
</code></pre>
<p>Examples from the standard: <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_dotime.htm"><code>DOTIMES</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_dolist.htm"><code>DOLIST</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_do_sym.htm"><code>DO-SYMBOLS</code></a>.</p>
<h1 id="foocase-efoocase-cfoocase">FOOCASE, EFOOCASE, CFOOCASE <a href="#foocase-efoocase-cfoocase" class="anchor" aria-hidden="true">#</a></h1>
<p>Macros that match an input against certain cases are often named with a <code>CASE</code>-postfix. There is often a <code>E...CASE</code>-variant, which signals an error if the input doesn&rsquo;t match any of the cases, and <code>C...CASE</code>, which signals a continuable error. They should have syntax like</p>
<pre><code>(foocase input
  (case-to-match-against (optionally-some-params-for-the-case)
   case-body-forms...)
  more-cases...
  [(otherwise otherwise-body)])
</code></pre>
<p>Examples from the standard: <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_case_.htm"><code>CASE</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_tpcase.htm"><code>TYPECASE</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_hand_1.htm"><code>HANDLER-CASE</code></a>.</p>
<p>For example, a macro that matches a string against regular expressions and binds the register groups to variables. Uses <a href="http://weitz.de/cl-ppcre/">CL-PPCRE</a> for regular expressions.</p>
<pre><code>(defmacro regexcase (input &amp;body cases)
  (let ((block-sym (gensym &quot;block&quot;))
        (input-sym (gensym &quot;input&quot;)))
    `(let ((,input-sym ,input))
       (block ,block-sym
         ,@(loop for (regex vars . body) in cases
                 if (eql regex 'otherwise)
                   collect `(return-from ,block-sym (progn ,vars ,@body))
                 else
                   collect `(cl-ppcre:register-groups-bind ,vars
                                (,regex ,input-sym)
                              (return-from ,block-sym
                                (progn ,@body))))))))

(defun test (input)
  (regexcase input
    (&quot;(\\d+)-(\\d+)&quot; (foo bar)
      (format t &quot;Foo: ~a, Bar: ~a~%&quot; foo bar))
    (&quot;Foo: (\\w+)$&quot; (foo)
      (format t &quot;Foo: ~a.~%&quot; foo))
    (otherwise (format t &quot;Didn't match.~%&quot;))))

(test &quot;asd 23-234 qwe&quot;)
; Foo: 23, Bar: 234
(test &quot;Foo: Foobar&quot;)
; Foo: Foobar.
(test &quot;Foo: 43 - 23&quot;)
; Didn't match.
</code></pre>
<h1 id="define-foo-deffoo">DEFINE-FOO, DEFFOO <a href="#define-foo-deffoo" class="anchor" aria-hidden="true">#</a></h1>
<p>Macros that define things are usually named either with <code>DEFINE-</code> or <code>DEF</code> -prefix.</p>
<p>Examples from the standard: <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defun.htm"><code>DEFUN</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defmac.htm"><code>DEFMACRO</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defi_5.htm"><code>DEFINE-CONDITION</code></a>.</p>
<h2 id="macroexpand">MACROEXPAND <a href="#macroexpand" class="anchor" aria-hidden="true">#</a></h2>
<p>Macro expansion is the process of turning macros into actual code. This usually happens as part of the compilation process. The compiler will expand all macro forms before actually compiling code. Macro expansion also happens during <em>interpretation</em> of Lisp code.</p>
<p>One can call <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_mexp_.htm"><code>MACROEXPAND</code></a> manually to see what a macro form expands to.</p>
<pre><code>CL-USER&gt; (macroexpand '(with-open-file (file &quot;foo&quot;)
                        (do-something-with file)))
(LET ((FILE (OPEN &quot;foo&quot;)) (#:G725 T))
  (UNWIND-PROTECT
      (MULTIPLE-VALUE-PROG1 (PROGN (DO-SOMETHING-WITH FILE)) (SETQ #:G725 NIL))
    (WHEN FILE (CLOSE FILE :ABORT #:G725))))
</code></pre>
<p><code>MACROEXPAND-1</code> is the same, but only expands once. This s useful when trying to make sense of a macro form that expands to another macro form.</p>
<pre><code>CL-USER&gt; (macroexpand-1 '(with-open-file (file &quot;foo&quot;)
                          (do-something-with file)))
(WITH-OPEN-STREAM (FILE (OPEN &quot;foo&quot;)) (DO-SOMETHING-WITH FILE))
</code></pre>
<p>Note that neither <code>MACROEXPAND</code> nor <code>MACROEXPAND-1</code> expand the Lisp code on all levels. They only expand the top-level macro form. To macroexpand a form fully on all levels, one needs a <em>code walker</em> to do so. This facility is not provided in the Common Lisp standard.</p>
<h2 id="if-let-when-let-foo-let-macros">if-let, when-let, <foo>-let macros <a href="#if-let-when-let-foo-let-macros" class="anchor" aria-hidden="true">#</a></h2>
<p>These macros merge control flow and binding. They are an improvement over anaphoric anaphoric macros because they let the developer communicate meaning through naming. As such their use is recommended over their anaphoric counterparts.</p>
<pre><code>(if-let (user (get-user user-id))
  (show-dashboard user)
  (redirect 'login-page))
</code></pre>
<p><code>FOO-LET</code> macros bind one or more variables, and then use those variables as the test form for the corresponding conditional (<code>IF</code>, <code>WHEN</code>). Multiple variables are combined with <code>AND</code>. The chosen branch is executed with the bindings in effect. A simple one variable implementation  of <code>IF-LET</code> might look something like:</p>
<pre><code>(defmacro if-let ((var test-form) then-form &amp;optional else-form)
  `(let ((,var ,test-form))
     (if ,var ,then-form ,else-form)))

(macroexpand '(if-let (a (getf '(:a 10 :b 20 :c 30) :a))
               (format t &quot;A: ~a~%&quot; a)
               (format t &quot;Not found.~%&quot;)))
; (LET ((A (GETF '(:A 10 :B 20 :C 30) :A)))
;   (IF A
;       (FORMAT T &quot;A: ~a~%&quot; A)
;       (FORMAT T &quot;Not found.~%&quot;)))
</code></pre>
<p>A version that supports multiple variables is available in the <a href="https://common-lisp.net/project/alexandria/">Alexandria</a> library.</p>
<h2 id="unique-symbols-to-prevent-name-clashes-in-macros">Unique symbols to prevent name clashes in macros <a href="#unique-symbols-to-prevent-name-clashes-in-macros" class="anchor" aria-hidden="true">#</a></h2>
<p>The expansion of a macro often needs to use symbols that weren&rsquo;t passed as arguments by the user (as names for local variables, for example). One must make sure that such symbols cannot conflict with a symbol that the user is using in the surrounding code.</p>
<p>This is usually achieved by using <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_gensym.htm"><code>GENSYM</code></a>, a function that returns a fresh uninterned symbol.</p>
<p><strong>Bad</strong></p>
<p>Consider the macro below. It makes a <code>DOTIMES</code>-loop that also collects the result of the body into a list, which is returned at the end.</p>
<pre><code>(defmacro dotimes+collect ((var count) &amp;body body)
  `(let ((result (list)))
     (dotimes (,var ,count (nreverse result))
       (push (progn ,@body) result))))

(dotimes+collect (i 5)
  (format t &quot;~a~%&quot; i)
  (* i i))
; 0
; 1
; 2
; 3
; 4
;=&gt; (0 1 4 9 16)
</code></pre>
<p>This seems to work in this case, but if the user happened to have a variable name <code>RESULT</code>, which they use in the body, the results would probably not be what the user expects. Consider this attempt to write a function that collects a list of sums of all integers up to <code>N</code>:</p>
<pre><code>(defun sums-upto (n)
  (let ((result 0))
    (dotimes+collect (i n)
      (incf result i))))

(sums-upto 10) ;=&gt; Error!
</code></pre>
<p><strong>Good</strong></p>
<p>To fix the problem, we need to use <code>GENSYM</code> to generate a unique name for the <code>RESULT</code>-variable in the macro expansion.</p>
<pre><code>(defmacro dotimes+collect ((var count) &amp;body body)
  (let ((result-symbol (gensym &quot;RESULT&quot;)))
    `(let ((,result-symbol (list)))
       (dotimes (,var ,count (nreverse ,result-symbol))
         (push (progn ,@body) ,result-symbol)))))

(sums-upto 10) ;=&gt; (0 1 3 6 10 15 21 28 36 45)
</code></pre>
<p><strong>TODO: How to make symbols from strings</strong></p>
<p><strong>TODO: Avoiding problems with symbols in different packages</strong></p>
<h2 id="using-macros-to-define-data-structures">Using Macros to define data structures <a href="#using-macros-to-define-data-structures" class="anchor" aria-hidden="true">#</a></h2>
<p>A common use of macros is to create templates for data structures which obey common rules but may contain different fields. By writing a macro, you can allow the detailed configuration of the data structure to be specified without needing to repeat boilerplate code, nor to use a less efficient structure (such as a hash) in memory purely to simplify programming.</p>
<p>For example, suppose that we wish to define a number of classes which have a range of different properties, each with a getter and setter. In addition, for some (but not all) of these properties, we wish to have the setter call a method on the object notifying it that the property has been changed. Although Common LISP already has a shorthand for writing getters and setters, writing a standard custom setter in this way would normally require duplicating the code that calls the notification method in every setter, which could be a pain if there are a large number of properties involved. However, by defining a macro it becomes much easier:</p>
<pre><code>(defmacro notifier (class slot) 
  &quot;Defines a setf method in (class) for (slot) which calls the object's changed method.&quot;
   `(defmethod (setf ,slot) (val (item ,class))
     (setf (slot-value item ',slot) val)
     (changed item ',slot)))

(defmacro notifiers (class slots)
  &quot;Defines setf methods in (class) for all of (slots) which call the object's changed method.&quot;
  `(progn 
     ,@(loop for s in slots collecting `(notifier ,class ,s))))

(defmacro defclass-notifier-slots (class nslots slots)  
  &quot;Defines a class with (nslots) giving a list of slots created with notifiers, and (slots) giving a list of slots created with regular accessors.&quot;
  `(progn
     (defclass ,class () 
       ( ,@(loop for s in nslots collecting `(,s :reader ,s)) 
         ,@(loop for s in slots collecting `(,s :accessor ,s))))   
     (notifiers ,class ,nslots)))
</code></pre>
<p>We can now write <code>(defclass-notifier-slots foo (bar baz qux) (waldo))</code> and immediately define a class <code>foo</code> with a regular slot <code>waldo</code> (created by the second part of the macro with the specification <code>(waldo :accessor waldo)</code>), and slots <code>bar</code>, <code>baz</code>, and <code>qux</code> with setters that call the <code>changed</code> method (where the getter is defined by the first part of the macro, <code>(bar :reader bar)</code>, and the setter by the invoked <code>notifier</code> macro).</p>
<p>In addition to allowing us to quickly define multiple classes that behave this way, with large numbers of properties, without repetition, we have the usual benefit of code reuse: if we later decide to change how the notifier methods work, we can simply change the macro, and the structure of every class using it will change.</p>

			<div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between">
				</div>
			<div class="docs-navigation d-flex justify-content-between">
	
	
		<a href="/common-lisp/ansi-common-lisp-the-language-standard-and-its-documentation/">
						<div class="card my-1">
							<div class="card-body py-2">
								&larr; ANSI Common Lisp, the language standard and its documentation
							</div>
						</div>
					</a>
				<a class="ms-auto" href="/common-lisp/clos---the-common-lisp-object-system/">
						<div class="card my-1">
							<div class="card-body py-2">
								CLOS - the Common Lisp Object System &rarr;
							</div>
						</div>
					</a>
				
	
	</div>

			
		</main>
	</div>

      </div>
    </div>
    
    
    <footer class="footer text-muted">
  <div class="container-xxl">
    <div class="row">
      <div class="col-lg-8 order-last order-lg-first">
        <ul class="list-inline">
          <li class="list-inline-item">Copyright © 2018-2022 Wikiod.</li>
        </ul>
      </div>
      <div class="col-lg-8 order-first order-lg-last text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item"><a href="/about/">About</a></li>
          <li class="list-inline-item"><a href="/disclaimers/">Disclaimers</a></li>
          <li class="list-inline-item"><a href="/dcma/">DCMA</a></li>
          <li class="list-inline-item"><a href="/terms-of-use/">Terms of Use</a></li>
          <li class="list-inline-item"><a href="/privacy-policy/">Privacy Policy</a></li>
          </ul>
      </div>
    </div>
  </div>
</footer>
    

<script src="/js/bootstrap.min.54bf0932b8a36d0e152b1635b099a6ef1394d35327e2437550a075c9c8ed1bd8aed5847c21b36fc02ed24014c031d9ca24017b0c78b1639d7e2fa8329898b842.js" integrity="sha512-VL8JMrijbQ4VKxY1sJmm7xOU01Mn4kN1UKB1ycjtG9iu1YR8IbNvwC7SQBTAMdnKJAF7DHixY51&#43;L6gymJi4Qg==" crossorigin="anonymous" defer></script>
  <script src="/js/highlight.min.56a414730f1135fe77b5ea30bf74a2cc4101a6f386e85e5b789c800570cc33d33054000f45932c053a59b41018f72687867254a80e1b9710671852492533162f.js" integrity="sha512-VqQUcw8RNf53teowv3SizEEBpvOG6F5beJyABXDMM9MwVAAPRZMsBTpZtBAY9yaHhnJUqA4blxBnGFJJJTMWLw==" crossorigin="anonymous" defer></script>
  <script src="/main.min.4971645518aa07968852c38e2c8051abe697181395ad03d5fa0eb28e42edf5f54f801de05c98298ce77b65223caf97b7ea259fbca096e64b3840985ec069e2ef.js" integrity="sha512-SXFkVRiqB5aIUsOOLIBRq&#43;aXGBOVrQPV&#43;g6yjkLt9fVPgB3gXJgpjOd7ZSI8r5e36iWfvKCW5ks4QJhewGni7w==" crossorigin="anonymous" defer></script>
  
    
  </body>
</html>